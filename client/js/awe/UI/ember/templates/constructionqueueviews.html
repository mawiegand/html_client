<script type="text/x-handlebars" data-template-name="construction-queue-view">
  <div class="queue-list-pane">
    {{#each queues}}
      {{#view AWE.UI.Ember.SingleConstructionQueueView controllerBinding="controller" queueBinding="this" classNames="queue"}}
      <div class="queue-length">{{length}} / {{capacity}}</div>
      <h1>{{local queue.queueType.name}}</h1>
        {{#unless queue.empty }}
        <div class="queue-job-list">    
          {{#each queue.hashableJobs.collection }}
            {{#view AWE.UI.Ember.ConstructionJobView controllerBinding="controller" jobBinding="this" classNames="queue-job"}}
              {{view AWE.UI.Ember.BuildingView classNames="queue-job-image" buildingBinding="job.slot.building" levelBinding="job.level_after" }}
              <div class="queue-job-text">    
                <p class="building">{{local job.slot.building.name }} (L{{ job.level_after }})</p>
                <p class="duration">
                  {{#if active}}
                    {{#if finished}}
                      finishing...
                    {{else}}
                      {{formatDuration timeRemaining}} &nbsp;
                    {{/if}}
                  {{else}}
                    {{#unless job.destroyJob}}
                      {{formatDuration job.productionTime}}
                    {{else}}
                      {{formatDuration job.destructionTime}}
                    {{/unless}}
                  {{/if}}</p>
                <p class="finished">{{#if job.active_job }}{{ job.parsedFinishingDate }}{{else}}&nbsp;{{/if}}</p>
                <p class="queue-job-button finish-button">{{#if job.active_job }}<a href="#" {{action "finishJobPressed"}} title="spend 1 toad for finishing it immediately">hurry</a>{{/if}}</p>
                <p class="queue-job-button cancel">    
                  {{#if job.cancelable }}
                    <a href="#" {{action "cancelJobPressed"}}>cancel</a>
                  {{/if}}
                </p>  
              </div>  
            {{/view}}
          {{/each}}
        </div>  
        {{/unless}}
      {{/view}}
    {{/each}}
  </div>
</script>