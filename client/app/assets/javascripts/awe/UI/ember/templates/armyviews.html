<script type="text/x-handlebars" data-template-name="army-info-dialog">
  {{view AWE.UI.Ember.ArmyInfoView armyBinding="arguments.army" }}
</script>

<script type="text/x-handlebars" data-template-name="army-info-view">

    <div class="army-info-view clearfix">
      <div class="clearfix header">
        {{#if army.npc}}
          <div class="advisor neanderthal"></div>
        {{else}}
          <div class="advisor warrior"></div>
        {{/if}}
        <h2>{{ army.name }} 
          {{#if isChangeNamePossible}}
            <a href="#" class="change-name" {{action "changeNamePressed" target="parentView.parentView"}}>change name</a>
          {{/if}}
        </h2>
        <p class="citation">{{message}}</p>
        {{#if army.npc}}
          <p>This army of raving wildlings is without leadership and thus, makes a good target for
             your armies to gain experience and improve their fighting skill.</p>
        {{/if}}
        <span title="A higher rank improves the efficiency of your troops. You need to gain experience in order to reach a higher the rank."><b>Rank:</b> {{army.rankToDisplay}} </span>
        {{#if army.isOwnProp}} 
          &nbsp;<span title="Experience is gained through losing own troops, not by killing opponents. Reason: you learn more from making errors."><b>Experience:</b> {{army.exp}}</span> 
        {{/if}}
      </div>
      
        <div class="army-view-unit-list">
          <h4>Units</h4>
          {{#if displayUnits}}
            <table class="table-list">
                {{#each units}}
              <tr>
                <th>{{local name}}:</th>
                <td>{{number}}</td>
              </tr>
                {{/each}}
            </table>
          {{else}}
            {{view AWE.UI.Ember.WheelOrValueView valueBinding="false"}}
          {{/if}}
        </div>
      
        <div class="army-view-property-list">   <!-- TODO: display categories dynamically! (wherever possible) -->
          <h4>Properties</h4>
          <table class="table-list">
            <tr>
              <th>Strength Melee:</th>
              <td>{{formatNumber army.unitcategory_infantry_strength places="0"}}</td>
            <tr>
            </tr>
              <th>Strength Riders:</th>
              <td>{{formatNumber army.unitcategory_cavalry_strength places="0"}}</td>
            <tr>
            </tr>
              <th>Strength Distance:</th>
              <td>{{formatNumber army.unitcategory_artillery_strength places="0"}}</td>
            <tr>
            </tr>
              <th>Overal Strength:</th>
              <td>{{formatNumber army.strength places="0"}}</td>
            <tr>
            </tr>
              <th>Size:</th>
              <td>{{ army.size_present }} / {{army.size_max}}</td>
            <tr>
            </tr>
              <th>Velocity:</th>
              <td>{{ army.velocity }}</td>
            </tr>
          </table>
        </div>
    </div>  
</script>

<script type="text/x-handlebars" data-template-name="army-create-dialog">
      <div class="modal-dialog-background"></div>
      <div class="center-helper">
        <div class="modal-dialog-pane" id="army-create-form">
          <h2>{{ t army.create.header }}</h2>
          <p>{{ t army.create.remainingArmies }}: {{ remainingArmies }}</p>
          {{view AWE.UI.Ember.ArmyForm unitTypesBinding="unitTypes" garrisonSumBinding="garrisonSum" otherSumBinding="otherSum" }}
          <p>{{ t army.form.name }}: {{view AWE.UI.Ember.ArmyNameTextfield valueBinding="armyName" placeholder="New Army" classNames="army-name-field" }}</p>
          {{#if loadingSettlement }}
            {{view AWE.UI.Ember.ActivityIndicatorView classNames="activity-indicator-small" }}
          {{else}}
            {{#if remainingArmies }}
              <a href="#" {{action "reset" target="parentView"}}>{{ t army.form.reset }}</a> | 
              <a href="#" {{action "createPressed" target="parentView"}}>{{ t army.form.create }}</a>
            {{else}}
              {{ t army.create.error }}
            {{/if}}
          {{/if}}
          {{#if "loading" }}
            <p>{{view AWE.UI.Ember.ActivityIndicatorView classNames="activity-indicator-small" }} {{ army.create.loadingMessage }}</p>
          {{/if}}
          <a class="close" href="#" {{action "cancelPressed" target="parentView"}}></a>
        </div>
      </div>
</script>

<script type="text/x-handlebars" data-template-name="army-change-dialog">
      <div class="modal-dialog-background"></div>
      <div class="center-helper">
        <div class="modal-dialog-pane" id="army-change-form">
          <h2>{{ t army.change.header }}</h2>
          {{view AWE.UI.Ember.ArmyForm unitTypesBinding="unitTypes" garrisonSumBinding="garrisonSum" otherSumBinding="otherSum" armyNameBinding="otherArmy.name" }}
          <a href="#" {{action "reset" target="parentView"}}>{{ t army.form.reset }}</a> | <a href="#" {{action "changePressed" target="parentView"}}>{{ t army.form.change }}</a>
          {{#if "loading" }}
            <p>{{view AWE.UI.Ember.ActivityIndicatorView classNames="activity-indicator-small" }} {{ army.change.loadingMessage }}</p>
          {{/if}}
          <a class="close" href="#" {{action "cancelPressed" target="parentView"}}></a>
        </div>
      </div>
</script>

<script type="text/x-handlebars" data-template-name="army-form">
      <table>
        <tr>
          <th></th>
          <th colspan="3" class="garrison">{{ t army.form.available }}</th>
          <th colspan="3" class="other">{{#if armyName}}{{ armyName }}{{else}}{{ t army.form.new }}{{/if}}</th>
        </tr>
        {{#each unitTypes }}
          {{#view AWE.UI.Ember.UnitRowView unitTypeBinding="this" }}
        <tr>
          <td class="unit">{{ local unitType.name }}</td>
          <td>{{view AWE.UI.Ember.GarrisonArmyUnitTextfield allUnitsBinding="unitType.allUnits" garrisonUnitsBinding="unitType.garrisonUnits" otherUnitsBinding="unitType.otherUnits" classNames="units-field" }}</td>
          <td><a href="#" {{action "allToGarrison"}}><<</a></td>
          <td><a href="#" {{action "oneToGarrison"}}><</a></td>
          <td><a href="#" {{action "oneToOther"}}>></a></td>
          <td><a href="#" {{action "allToOther"}}>>></a></td>
          <td>{{view AWE.UI.Ember.OtherArmyUnitTextfield allUnitsBinding="unitType.allUnits" garrisonUnitsBinding="unitType.garrisonUnits" otherUnitsBinding="unitType.otherUnits" classNames="units-field"}}</td>
        </tr>
          {{/view }}
        {{/each}}
        <tr class="line">
          <td class="unit">{{ t army.form.all }}</td>
          <td>{{ garrisonSum }}</td>
          <td><a href="#" {{action "allToGarrison" target="parentView"}}><<</a></td>
          <td></td>
          <td></td>
          <td><a href="#" {{action "allToOther" target="parentView"}}>>></a></td>
          <td>{{ otherSum }}</td>
        </tr>
      </table>
</script>




