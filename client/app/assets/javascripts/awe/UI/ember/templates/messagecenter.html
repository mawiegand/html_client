<script type="text/x-handlebars" data-template-name="wheel-or-value">
  {{#if nullValue}}
    {{view AWE.UI.Ember.ActivityIndicatorView classNames="activity-indicator-small" }}
  {{else}}
    {{value}}
  {{/if}} 
</script>



<script type="text/x-handlebars" data-template-name="message-teaser">
  {{#if parentView.displayingOutbox}}
    <span class="recipient">
      {{view AWE.UI.Ember.WheelOrValueView valueBinding="message.recipient.name"}}
    </span>   
  {{else}}
    <span {{bindAttr class=":sender message.unread"}}>
      {{#if message.sender_id}}
        {{view AWE.UI.Ember.WheelOrValueView valueBinding="message.sender.name"}}
      {{else}}
        System
      {{/if}}
    </span> 
  {{/if}} <span class="time">{{timeString}}</span><br />
  <span {{bindAttr class=":subject message.unread"}}>{{message.subject}}</span>
</script>


<script type="text/x-handlebars" data-template-name="message-draft-teaser">
{{#with draft}}
  <span class="recipient">
    {{#if recipient}}
      {{recipient}}
    {{else}}
      {{#if alliance}}
        {{t messaging.allianceMail}}
      {{else}}
        {{t messaging.unknownRecipient}}
      {{/if}}
    {{/if}}
  </span>   <br />
  <span class="subject">
    {{#if subject}}
      {{subject}}
    {{else}}
      {{t messaging.subject}}
    {{/if}}
  </span>
{{/with}}
</script>

<script type="text/x-handlebars" data-template-name="message-edit">
{{#with message}}
  <div class="message-edit-menue">
    <div class="message-edit-commands">
      <a href="#" {{action "submit"}}>{{t messaging.send}}</a>
      <a href="#" {{action "cancelForm"}}>{{t messaging.cancel}}</a>
    </div>
    <div class="message-edit-title">
      {{t messaging.newMessage}} {{#if recipient}}
       {{t messaging.toHeader}} {{recipient}}
      {{else}}
        {{#if alliance}}
          {{t messaging.toAlliance}}
        {{/if}}
      {{/if}}
    </div>
    <div class="message-edit-fill"></div>
  </div>
  <div class="message-edit-header">
    <table>
      <tr><th {{bindAttr class="recipientUnknown:red-color"}}>{{#if recipientUnknown }}<em>{{t messaging.unknown}}</em>{{/if}} {{t messaging.to}}:</th>
        <td>
          {{#if alliance}}
            {{t messaging.allMembersOf}} {{alliance.name}}
          {{else}}
            <b>{{view Ember.TextField valueBinding="recipient" placeholder="recipient"}}</b>
          {{/if}}
        </td>
      </tr>
      <tr><th>{{t messaging.subject}}:</th>
        <td>{{view Ember.TextField valueBinding="subject" placeholder="subject"}}</td>
      </tr>
    </table>
  </div>
  {{view Ember.TextArea valueBinding="body"}}
{{/with}}
</script>

<script type="text/x-handlebars" data-template-name="message">
  <table>
    <tr><th>{{t messaging.from}}:</th><td>
      <b>{{#if message.sender_id}}
           {{view AWE.UI.Ember.WheelOrValueView valueBinding="message.sender.name"}}
           {{#if "message.sender.alliance_tag"}}
             | {{message.sender.alliance_tag}}
           {{/if}}
         {{else}}
           System
         {{/if}}
      <b>
    </td></tr>
    <tr><th>{{t messaging.subject}}:</th><td>{{message.subject}}</td></tr>
    <tr><th>{{t messaging.date}}:</th><td>{{timeString}}</td></tr>
    <tr><th>{{t messaging.to}}:</th><td>
      {{#if message.recipient_id}}
        {{view AWE.UI.Ember.WheelOrValueView valueBinding="message.recipient.name"}} 
        {{#if "message.recipient.alliance_tag"}}
          | {{message.recipient.alliance_tag}}
        {{/if}}
      {{else}}
        {{#if message.isAllianceMessage}}
          {{t messaging.allAllianceMembers}}
        {{else}}
          {{t messaging.allPlayers}}
        {{/if}}
      {{/if}}
    </td></tr>
  </table>
  <hr>
  {{{message.body}}}
</script>


<script type="text/x-handlebars" data-template-name="message-center">
<div class="message-center">
  <div class="header">
    <div id="inbox-control">
      <div {{action "inboxClicked"  target="controller"}}>{{t messaging.inbox}}</div>
      <div {{action "outboxClicked" target="controller"}}>{{t messaging.outbox}}</div>
      {{#if character.isPlatinumActive}}
        <div {{action "archiveClicked"  target="controller"}}>Archive</div>
      {{/if}}
      <div {{action "newClicked"    target="controller"}}>{{t messaging.new}}</div>
    </div>

    <div id="actions">
      {{#if isReplyPossible}}
        <div {{action "replyClicked" }}>{{t messaging.reply}}</div>
      {{else}}
        <div class="inactive">{{t messaging.reply}}</div>
      {{/if}}
      {{#if isForwardPossible}}
        <div {{action "forwardClicked" }}>{{t messaging.forward}}</div>
      {{else}}
        <div class="inactive">{{t messaging.forward}}</div>
      {{/if}} &nbsp;&nbsp;
      {{#if isDeletePossible}}
        <div {{action "deleteClicked" }}>{{t messaging.delete}}</div>
      {{else}}
        <div class="inactive">{{t messaging.delete}}</div>
      {{/if}}
      {{#if character.isPlatinumActive}}
        {{#if isForwardPossible}}
          <div {{action "archiveingClicked" }}>Archivieren</div>
        {{else}}
          <div class="inactive">Archivieren</div>
        {{/if}}
      {{/if}}
      {{#if isAllianceMessagePossible}}
        <div {{action "newAllianceMessageClicked" target="controller"}}>{{t messaging.newAllianceMail}}</div>
      {{/if}}            
    </div>
  </div>

  <div class="list">
    {{#if "newMessage"}}
      <h1>Entwurf</h1>
      {{view AWE.UI.Ember.DraftTeaserView draftBinding="newMessage" classNames="message-header" classNameBindings="selected"}}
    {{/if}}
    {{#if "messageBox"}}
      <h1>{{messageBox.name}} {{#if messageBox.unread_messages_count}}({{messageBox.unread_messages_count}}){{/if}}</h1>
      {{#each messageBox.sortedEntries}}
        {{view AWE.UI.Ember.MessageTeaserView messageBinding="this" classNames="message-header" classNameBindings="selected"}}
      {{/each}}
    {{else}}
      <h1>{{view AWE.UI.Ember.ActivityIndicatorView classNames="activity-indicator-small" }} {{t general.startup.loading}}</h1>
    {{/if}}
    </hr>
  </div>
  
  <div class="detail">
    {{#if "isFormVisible"}}
      {{view AWE.UI.Ember.NewMessageView messageBinding="newMessage" classNames="message-edit"}}      
    {{else}}
      {{#if "selectedMessageEntry" }}
        {{#if "selectedMessage" }}
          {{view AWE.UI.Ember.MessageView messageBinding="selectedMessage" classNames="message"}}
        {{else}}
          {{view AWE.UI.Ember.ActivityIndicatorView classNames="activity-indicator-small" }} {{t general.startup.loading}}
        {{/if}}
      {{else}}
        {{t messaging.noMessageSelected}}
      {{/if}}
    {{/if}}
  </div>
</div>
</script>