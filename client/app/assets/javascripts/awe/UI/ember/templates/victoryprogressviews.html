<script type="text/x-handlebars" data-template-name="alliance-victory-view">
  <div class="alliance-victory">
    {{view AWE.UI.Ember.AllianceVictoryTabView allianceBinding="alliance"}}
  </div>
</script>

<script type="text/x-handlebars" data-template-name="alliance-victory-progress-domination-view">
  <div class="alliance-victory-progress-domination">
    {{#if AWE.GS.game.roundInfo.victoryGained}}
      <p class="red-color">Diese Runde hat die Allianz [{{AWE.GS.game.roundInfo.winner_alliance_tag}}] am {{formatDatetime AWE.GS.game.roundInfo.victoryGainedAt}} durch einen {{local AWE.GS.game.roundInfo.victoryType.name}} gewonnen.</p>
    {{/if}}
    <p>{{ local victoryType.description }}</p>
    <p>{{t alliance.progress.requiredRegions}}: {{requiredRegions}} {{t general.of}} {{AWE.GS.game.roundInfo.regions_count}} ({{formatAsPercent requiredRegionsRatio}}), {{t alliance.progress.requiredDuration}}: {{victoryType.condition.duration}} {{t general.days}}</p>
  </div>
  
  <div class="progress-bar progress-domination-grey">
    <div class="marker fullfilled">
      <div>{{t alliance.progress.criteriaFulfilled}}</div>
      <div>{{requiredRegions}}</div>
    </div>
    <div class="marker held">
      <div>{{t alliance.progress.criteriaHeld}}</div>
    {{#if leaderProgress.fulfilled }}
      <div>{{t alliance.progress.victoryAt}} {{leaderProgress.endDate}}</div>
    {{else}}
      <div>{{t alliance.progress.victoryAfter}} {{victoryType.condition.duration}} {{t alliance.progress.days}}</div>
    {{/if}}
    </div>
    {{#if alliance}}
      {{#if progress.fulfilled }}
        <div {{bindAttr style="styleFulfilled"}}>
          <div style="height: 20px; margin-top: 60px; padding-right: 3px;">
            {{#if progress.victory_gained }}
              <b>{{t alliance.progress.won}}</b>
            {{else}}
              <b>{{progress.daysRemaining}} {{t alliance.progress.remainingDays}}</b>
            {{/if}}
          </div>
        </div>
      {{else}}
        <div {{bindAttr style="styleNotFulfilled"}}>
          <div style="height: 20px; margin-top: 60px; padding-left: 3px;">
            <b>{{progress.fulfillment_count}}</b>
          </div>
        </div>
      {{/if}}
    {{/if}}
    {{view AWE.UI.Ember.AllianceVictoryProgressOtherAllianceView nr="first"}}
    {{view AWE.UI.Ember.AllianceVictoryProgressOtherAllianceView nr="second"}}
    {{view AWE.UI.Ember.AllianceVictoryProgressOtherAllianceView nr="third"}}

  </div>
</script>

<script type="text/x-handlebars" data-template-name="alliance-victory-progress-artifact-view">
  <div class="alliance-victory-progress-artifacts">
    {{#if AWE.GS.game.roundInfo.victoryGained}}
      <p class="red-color">Diese Runde hat die Allianz [{{AWE.GS.game.roundInfo.winner_alliance_tag}}] am {{formatDatetime AWE.GS.game.roundInfo.victoryGainedAt}} durch einen {{local AWE.GS.game.roundInfo.victoryType.name}} gewonnen.</p>
    {{/if}}
    <p>{{ local victoryType.description }}</p>
    <p>{{t alliance.progress.requiredArtifacts}}: {{requiredArtifacts}}, {{t alliance.progress.requiredDuration}}: {{victoryType.condition.duration}} {{t general.days}}</p>
  </div>

  <div class="progress-bar progress-domination-grey">
    <div class="marker fullfilled">
      <div>{{t alliance.progress.criteriaFulfilled}}</div>
      <div>{{requiredArtifacts}}</div>
    </div>
    <div class="marker held">
      <div>{{t alliance.progress.criteriaHeld}}</div>
    {{#if leaderProgress.fulfilled }}
      <div>{{t alliance.progress.victoryAt}} {{leaderProgress.endDate}}</div>
    {{else}}
      <div>{{t alliance.progress.victoryAfter}} {{victoryType.condition.duration}} {{t alliance.progress.days}}</div>
    {{/if}}
    </div>
    {{#if alliance}}
      {{#if progress.fulfilled }}
        <div {{bindAttr style="styleFulfilled"}}>
          <div style="height: 20px; margin-top: 60px; padding-right: 3px;">
            {{#if progress.victory_gained }}
              <b>{{t alliance.progress.won}}</b>
            {{else}}
              <b>{{progress.daysRemaining}} {{t alliance.progress.remainingDays}}</b>
            {{/if}}
          </div>
        </div>
      {{else}}
        <div {{bindAttr style="styleNotFulfilled"}}>
          <div style="height: 20px; margin-top: 60px; padding-left: 3px;">
            <b>{{progress.fulfillment_count}}</b>
          </div>
        </div>
      {{/if}}
    {{/if}}
    {{view AWE.UI.Ember.AllianceVictoryProgressOtherAllianceView nr="first"}}
    {{view AWE.UI.Ember.AllianceVictoryProgressOtherAllianceView nr="second"}}
    {{view AWE.UI.Ember.AllianceVictoryProgressOtherAllianceView nr="third"}}
  </div>
</script>

<script type="text/x-handlebars" data-template-name="alliance-victory-progress-other-alliance-view">
  {{#if progress}}
    {{#if progress.fulfilled}}
    <div {{bindAttr style="styleFulfilled1"}} class="fulfilled">
      <div {{bindAttr style="styleFulfilled2"}}>
        {{#if progress.victory_gained }}
          {{progress.pos}}. {{progress.alliance_tag}} ({{t alliance.progress.won}})
        {{else}}
          {{progress.pos}}. {{progress.alliance_tag}} ({{progress.daysRemaining}} {{t alliance.progress.remainingDays}})
        {{/if}}
      </div>
    </div>
    {{else}}
    <div {{bindAttr style="styleNotFulfilled1"}} class="notFulfilled">
      <div {{bindAttr style="styleNotFulfilled2"}}>
        {{progress.pos}}. {{progress.alliance_tag}} ({{progress.fulfillment_count}})
      </div>
    </div>
    {{/if}}
  {{/if}}
</script>