<script type="text/x-handlebars" data-template-name="resource-exchange-dialog">
  <div class="modal-dialog-background"></div>
  <div class="modal-dialog-pane resource-details-dialog-pane scale-down" id="resource-exchange-dialog">
    <a class="close clickable" {{action "cancelClicked" target="parentView"}}></a>
    <div class="advisor warrior"></div>
    
    <h2>{{t resource.exchange.header}}</h2>
    <p>{{t resource.exchange.info}}</p>
    <aside><em>{{t resource.exchange.warning}}</em></aside>
    <aside><b><em>{{t resource.exchange.fee}} {{cost}}<span class="resource-icon resource_cash">&nbsp;</span> {{t resource.exchange.fee2}}</em></b></aside>

    <br class="clear">

    {{#if loadingInit}}
      {{view AWE.UI.Ember.WheelOrValueView valueBinding="null"}}&nbsp;&nbsp;&nbsp;{{t resource.exchange.loading}}
    {{else}}
    <table>
      <tr>
        <th><span class="resource-icon resource_stone number no-bg-repeat" title="{{t resource.stone}}">{{pool.resource_stone_present}}</span></th>
        <th><span class="resource-icon resource_wood number no-bg-repeat" title="{{t resource.wood}}">{{pool.resource_wood_present}}</span></th>
        <th><span class="resource-icon resource_fur number no-bg-repeat" title="{{t resource.fur}}">{{pool.resource_fur_present}}</span></th>
        <th>
          <table>
            <tr>
              <td>{{t resource.exchange.sum}}:</td>
              <td class="remaining">{{formatNumber getSum}}</td>
            </tr>
          </table>
        </th>
      </tr>

      <tr>
        <td>{{view Ember.TextField valueBinding="newStoneValue" classNames="resource-exchange-input"}}</td> 
        <td>{{view Ember.TextField valueBinding="newWoodValue" classNames="resource-exchange-input"}}</td> 
        <td>{{view Ember.TextField valueBinding="newFurValue" classNames="resource-exchange-input"}}</td>
        <td>
          <table>
            <tr>
              <td>{{t resource.exchange.sum}}:</td>
              <td class="remaining">{{formatNumber getNewSum}}</td>
            </tr>
          </table>
        </td>
      </tr>

      <tr>
        <td><span class="number">{{getStoneDiff}}</span></td>
        <td><span class="number">{{getWoodDiff}}</span></td>
        <td><span class="number">{{getFurDiff}}</span></td>
        <td>
          <div class="left">{{t resource.exchange.remaining}}:</div>
          <div {{bindAttr class=":remaining :right remainingClass"}}>{{getRemaining}}</div>
          <div class="clear"></div>
        </td>
      </tr>

    </table> 
    {{/if}}


    <br>
    <div>
      {{#if loadingSend}}
      <div class="right">{{view AWE.UI.Ember.WheelOrValueView valueBinding="null"}}&nbsp;&nbsp;&nbsp;{{t resource.exchange.loading2}}</div>
      <br class="clear">
      {{else}}
      <a class="icon-button button" href="#" {{action "resetClicked"}}>{{t resource.exchange.form.reset}}</a>
      <a class="icon-button ok-button" href="#" {{action "exchangeClicked"}}>{{t resource.exchange.form.exchange}}</a>
      {{/if}}
    </div>

  </div>
</script>

