<script type="text/x-handlebars" data-template-name="ranking-view">
  <div class="modal-dialog-background z-layer-3"></div>
  <div class="horizontal-center-helper">
    <div class="modal-dialog-pane z-layer-4 ranking-view">
      <a {{action "closePressed"}} class="close clickable"></a>
      <h1>{{t ranking.header }}</h1>
      <div class="advisor chef"></div>
      <br />
      
      {{view AWE.UI.Ember.RankingTabView }}
    </div>
  </div>
</script>


<script type="text/x-handlebars" data-template-name="character-ranking-view">
    <table class="ranking-table">
      <tr>
        <th class="rank">{{t ranking.rank}}</th>
        <th class="character">{{t ranking.character}}</th>
        <th {{bindAttr class="sortedByOverall :clickable :overall"}} {{action "sortByOverall"}}>{{t ranking.overallScore}}</th>
        <th {{bindAttr class="sortedByResource :clickable :resource"}} {{action "sortByResource"}}>{{t ranking.resourceScore}}</th>
        <th {{bindAttr class="sortedByLikes :clickable :likes"}} {{action "sortByLikes"}}>{{t ranking.likes}}</th>
        <th {{bindAttr class="sortedByVictories :clickable :victories"}} {{action "sortByVictories"}}>{{t ranking.victories}}</th>
        <th {{bindAttr class="sortedByVictoryRatio :clickable :victory-ratio"}} {{action "sortByVictoryRatio"}}>{{t ranking.victoryRatio}}</th>
        <th {{bindAttr class="sortedByKills :clickable :kills"}} {{action "sortByKills"}}>{{t ranking.beatenUnits}}</th>
        <th {{bindAttr class="sortedByExperience :clickable :experience"}} {{action "sortByExperience"}}>{{t ranking.experiencedArmy}}</th>
      </tr>
      {{#if characterRankingEntries}}
        {{#each characterRankingEntries}}
          <tr {{bindAttr class="this.ownEntry:bold"}}>
            <td class="number rank">{{this.rank}}</td>
            <td><a class="clickable character" {{action "characterPressed"}}>{{this.character_name}}</a>{{#if this.alliance_tag}} | <a class="clickable" {{action "alliancePressed" target="parentView"}}>{{this.alliance_tag}}{{/if}}</a></td>
            <td class="number overall">{{this.overall_score}}</td>
            <td class="number resource">{{this.resource_score}}</td>
            <td class="number likes">{{this.likes}} ({{formatAsPercent this.like_ratio}})</td>
            <td class="number victories">{{this.victories}}</td>
            <td class="number victory-ratio">{{formatNumber this.victory_ratio maxPlaces="1"}}</td>
            <td class="number kills">{{this.kills}}</td>
            <td class="number experience">{{this.max_experience}}</td>
          </tr>
        {{/each}}
        {{#each emptyCharacterRankingEntries}}
          <tr><td colspan="9"></td></tr>
        {{/each}}
        <tr>
          <td colspan="9" style="text-align:center;">
            {{view AWE.UI.Ember.RankingNavigationView currentPageBinding="currentPage" maxPageBinding="maxPage"}}
          </td>
        </tr>
      {{else}}
        {{#each emptyEntriesAheadOfSpinwheel}}
          <tr><td colspan="9"></td></tr>
        {{/each}}
        </tr>
          <td colspan="9" style="text-align:center;">
            {{view AWE.UI.Ember.WheelOrValueView valueBinding="false"}}
          </td>
        </tr>
        {{#each emptyEntriesAfterSpinwheel}}
          <tr><td colspan="9"></td></tr>
        {{/each}}
      {{/if}}  
    </table>
</script>

<script type="text/x-handlebars" data-template-name="alliance-ranking-view">
    <table class="ranking-table">
      <tr>
        <th class="rank2">{{t ranking.rank}}</th>
        <th class="alliance">{{t ranking.alliance}}</th>
        <th {{bindAttr class="sortedByFortress :clickable :fortress"}} {{action "sortByFortress"}}>{{t ranking.numFortresses}}</th>
        <th {{bindAttr class="sortedByOverall :clickable :overall2"}} {{action "sortByOverall"}}>{{t ranking.overallScore}}</th>
        <th {{bindAttr class="sortedByResource :clickable :resource2"}} {{action "sortByResource"}}>{{t ranking.resourceScore}}</th>
        <th {{bindAttr class="sortedByKills :clickable :kills2"}} {{action "sortByKills"}}>{{t ranking.beatenUnits}}</th>
        <th {{bindAttr class="sortedByMembers :clickable :members"}} {{action "sortByMembers"}}>{{t ranking.numMembers}}</th>
        <th {{bindAttr class="sortedByFortressMembers :clickable :region-members"}} {{action "sortByFortressMembers"}}>{{t ranking.regionsPerMember}}</th>
      </tr>
      {{#if allianceRankingEntries}}
        {{#each allianceRankingEntries}}
          <tr {{bindAttr class="this.ownEntry:bold"}}>
            <td class="number">{{this.rank}}</td>
            <td><a {{action "alliancePressed"}}>{{this.alliance_tag}}</a></td>
            <td class="number">{{this.num_fortress}}</td>
            <td class="number">{{this.overall_score}}</td>
            <td class="number">{{this.resource_score}}</td>
            <td class="number">{{this.kills}}</td>
            <td class="number">{{this.num_members}}</td>
            <td class="number">{{this.regions_per_member}}</td>
          </tr>
        {{/each}}
        {{#each emptyAllianceRankingEntries}}
          <tr><td colspan="8"></td></tr>
        {{/each}}
        <tr>
          <td colspan="8" style="text-align:center;">
            {{view AWE.UI.Ember.RankingNavigationView currentPageBinding="currentPage" maxPageBinding="maxPage"}}
          </td>
        </tr>
      {{else}}
        {{#each emptyEntriesAheadOfSpinwheel}}
          <tr><td colspan="8"></td></tr>
        {{/each}}
        </tr>
          <td colspan="8" style="text-align:center;">
            {{view AWE.UI.Ember.WheelOrValueView valueBinding="false"}}
          </td>
        </tr>
        {{#each emptyEntriesAfterSpinwheel}}
          <tr><td colspan="9"></td></tr>
        {{/each}}
      {{/if}}  
    </table>
</script>

<script type="text/x-handlebars" data-template-name="fortress-ranking-view">
    <table class="ranking-table">
      <tr>
        <th class="rank2">{{t ranking.rank}}</th>
        <th {{bindAttr class="sortedByName :clickable :fortress2"}} {{action "sortByName"}}>{{t ranking.fortress}}</th>
        <th class="character">{{t ranking.owner}}</th>
        <th {{bindAttr class="sortedByTaxRate :clickable :tax"}} {{action "sortByTaxRate"}}>{{t ranking.taxRate}}</th>
        <th {{bindAttr class="sortedByIncome :clickable :income"}} {{action "sortByIncome"}}>{{t ranking.income}}</th>
        <th {{bindAttr class="sortedByDefense :clickable :defense"}} {{action "sortByDefense"}}>{{t ranking.defenseBonus}}</th>
      </tr>
      {{#if fortressRankingEntries}}
        {{#each fortressRankingEntries}}
          <tr {{bindAttr class="this.ownEntry:bold"}}>
            <td class="number">{{this.rank}}</td>
            <td><a class="clickable" {{action "regionPressed"}}>{{this.region_name}}</a></td>
            <td><a class="clickable" {{action "characterPressed"}}>{{this.character_name}}</a>{{#if this.alliance_tag}} | <a class="clickable" {{action "alliancePressed"}}>{{this.alliance_tag}}{{/if}}</a></td>
            <td class="number">{{formatAsPercent this.tax_rate}}</td>
            <td class="number">{{formatNumber this.resource_production_score maxPlaces="0"}}</td>
            <td class="number">{{formatAsPercent this.defense_bonus}}</td>
          </tr>
        {{/each}}
        {{#each emptyFortressRankingEntries}}
          <tr><td colspan="6"></td></tr>
        {{/each}}
        <tr>
          <td colspan="6" style="text-align:center;">
            {{view AWE.UI.Ember.RankingNavigationView currentPageBinding="currentPage" maxPageBinding="maxPage"}}
          </td>
        </tr>
      {{else}}
        {{#each emptyEntriesAheadOfSpinwheel}}
          <tr><td colspan="6"></td></tr>
        {{/each}}
        </tr>
          <td colspan="6" style="text-align:center;">
            {{view AWE.UI.Ember.WheelOrValueView valueBinding="false"}}
          </td>
        </tr>
        {{#each emptyEntriesAfterSpinwheel}}
          <tr><td colspan="6"></td></tr>
        {{/each}}
      {{/if}}  
    </table>
</script>

<script type="text/x-handlebars" data-template-name="ranking-navigation-view">
  {{#if pageGreater1}}<a class="clickable" {{action "gotoPreviousPage" target="parentView"}}>&lt;&lt;</a> | <a class="clickable" {{action "gotoFirstPage" target="parentView"}}>1</a> |{{/if}}
  {{#if pageGreater3}}<a class="clickable" {{action "gotoSecondPage" target="parentView"}}>2</a> |{{/if}}
  {{#if pageGreater5}} ... |{{/if}}
  {{#if pageGreater4}}<a class="clickable" {{action "gotoPreviousPreviousPage" target="parentView"}}>{{previousPreviousPage}}</a> |{{/if}}
  {{#if pageGreater2}}<a class="clickable" {{action "gotoPreviousPage" target="parentView"}}>{{previousPage}}</a> |{{/if}} 
  <b>{{currentPage}}</b>
  {{#if pageLessMax2}}| <a class="clickable" {{action "gotoNextPage" target="parentView"}}>{{nextPage}}</a>{{/if}} 
  {{#if pageLessMax4}}| <a class="clickable" {{action "gotoNextNextPage" target="parentView"}}>{{nextNextPage}}</a>{{/if}} 
  {{#if pageLessMax5}}| ... {{/if}} 
  {{#if pageLessMax3}}| <a class="clickable" {{action "gotoMaxPreviousPage" target="parentView"}}>{{maxPreviousPage}}</a>{{/if}} 
  {{#if pageLessMax1}}| <a class="clickable" {{action "gotoMaxPage" target="parentView"}}>{{maxPage}}</a> | <a class="clickable" {{action "gotoNextPage" target="parentView"}}>>></a>{{/if}} 
</script>

<script type="text/x-handlebars" data-template-name="victory-progress-ranking-view">
  {{view AWE.UI.Ember.AllianceVictoryView controllerBinding="controller" allianceBinding="AWE.GS.game.currentCharacter.alliance"}}
</script>
