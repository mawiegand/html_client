<!doctype html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!-- Consider adding a manifest.appcache: h5bp.com/d/Offline -->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">

  <!-- Use the .htaccess and remove these lines to avoid edge case issues.
       More info: h5bp.com/i/378 -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  

  <title></title>
  <meta name="description" content="">

  <!-- Mobile viewport optimized: h5bp.com/viewport -->
  <meta name="viewport" content="width=device-width, user-scalable=no" />

  <!-- Place favicon.ico and apple-touch-icon.png in the root directory: mathiasbynens.be/notes/touch-icons -->


<style>

.fortress-picture {
  position: relative;
  width: 800px;
  height: 600px;
} 

.fortress-picture .background {
  position: absolute;
  top: 0px;
  left: 0px;
  z-index: 0;
}

.fortress-picture .buildings {
  position: absolute;
  top: 0px;
  left: 0px;
  width: 800px;
  height: 600px;
  z-index: 1;
}

.fortress-picture .tower {
  position: absolute;
  width: 238px;
  height: 454px;
  z-index: 2;
}


.fortress-picture .buildings.size1 {
  background: url('fortress_buildings1.png');
}
.fortress-picture .buildings.size2 {
  background: url('fortress_buildings2.png');
}
.fortress-picture .buildings.size3 {
  background: url('fortress_buildings3.png');
}


.fortress-picture .tower.size1 {
  background: url('fortress_tower1.png');
}
.fortress-picture .tower.size2 {
  background: url('fortress_tower2.png');
}
.fortress-picture .tower.size3 {
  background: url('fortress_tower3.png');
}

.fortress-picture .tower-left {
  top: 24px;
  left: 0px;
}

.fortress-picture .tower.hovered {
  background: url('fortress_tower0_hovered.png');
}
.fortress-picture .tower.size1.hovered {
  background: url('fortress_tower1_hovered.png');
}
.fortress-picture .tower.size2.hovered {
  background: url('fortress_tower2_hovered.png');
}
.fortress-picture .tower.size3.hovered {
  background: url('fortress_tower3_hovered.png');
}

.fortress-picture .tower-right {
  top: 100px;
  right: 0px;
}


.fortress-picture .wall {
  position: absolute;
  background: url('fortress_wall1.png') no-repeat bottom;
  top: 360px;
  left: 0px;
  width: 800px;
  height: 240px;
  z-index: 3;
}


.fortress-picture .wall.size1 {
  background: url('fortress_wall1.png') no-repeat bottom;
}
.fortress-picture .wall.size2 {
  background: url('fortress_wall2.png') no-repeat bottom;
}
.fortress-picture .wall.size3 {
  background: url('fortress_wall3.png') no-repeat bottom;
}

.fortress-picture .wall.size1.hovered {
  background: url('fortress_wall1_hovered.png') no-repeat bottom;
}
.fortress-picture .wall.size2.hovered {
  background: url('fortress_wall2_hovered.png') no-repeat bottom;
}
.fortress-picture .wall.size3.hovered {
  background: url('fortress_wall3_hovered.png') no-repeat bottom;
}


</style>


<script type="text/x-handlebars" data-template-name="fortress-screen">

<div class="fortress-screen">
  <div class="fortress-picture">
    <img src="fortress_background.png" class="background" />
    {{view App.BuildingView  modelBinding="App.Wall" levelBinding="App.Wall.level" classNames="buildings"}}
    {{view App.InteractiveBuildingView modelBinding="App.LeftTower" levelBinding="App.LeftTower.level" classNames="tower tower-left"}}
    {{view App.InteractiveBuildingView modelBinding="App.RightTower" levelBinding="App.RightTower.level" classNames="tower tower-right"}}
    {{view App.InteractiveBuildingView modelBinding="App.Wall" levelBinding="App.Wall.level" classNames="wall"}}

  </div>
</div>

</script>
  
</head>
<body>



  <script>window.jQuery || document.write('<script src="../../../js/libs/jquery-1.7.1.min.js"><\/script>')</script>
  <script src="../../../js/libs/ember-0.9.5.js"></script>

<script>

App = Ember.Application.create({

  ready: function() {
    
    App.LeftTower = App.Building.create({
      level: 0,
    });
    App.RightTower = App.Building.create();
    App.Wall = App.Building.create();

    var fortressScreen = Ember.View.create({
      templateName: "fortress-screen",
    }).append();

  },
  
});    

App.Building = Ember.Object.extend({
  level: 1,
  
  build: function() {
    var newLevel = parseInt(this.get('level'))+1;
    this.set('level', newLevel);    
  },
});


App.BuildingView = Ember.View.extend({
  model: null, 
  hovered: false,

  classNameBindings: ['small:size1', 'middle:size2', 'large:size3', 'hovered'],

  small: function() {
    return this.get('level') > 0 && this.get('level') < 4;
  }.property('level'),
  
  middle: function() {
    return this.get('level') >= 4 && this.get('level') < 8;
  }.property('level'),
  
  large: function() {
    return this.get('level') >= 8;
  }.property('level'),
    
});

App.InteractiveBuildingView = App.BuildingView.extend({
  
  mouseEnter: function(event) {
    this.set('hovered', true);
  },
  mouseLeave: function(event) {
    this.set('hovered', false);
  },
  
  click: function(event) {
    this.get('model').build();
  },
  
});
    

</script>

</body>
</html>